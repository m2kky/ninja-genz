<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# API Specification Document

**Version:** 1.0
**Base URL:** `https://[project-ref].supabase.co/rest/v1`
**Authentication:** Bearer Token (JWT)
**Date:** January 24, 2026

---

## 1. API Overview

### 1.1 Architecture Style

- **REST API** (auto-generated by Supabase PostgREST)
- **GraphQL** (optional via Supabase - not primary)
- **Real-time subscriptions** via WebSocket (Supabase Realtime)

### 1.2 Base URLs


| Environment     | Base URL                            | Purpose        |
| :-------------- | :---------------------------------- | :------------- |
| **Development** | `http://localhost:54321`            | Local Supabase |
| **Staging**     | `https://[staging-ref].supabase.co` | Pre-production |
| **Production**  | `https://[prod-ref].supabase.co`    | Live system    |

---

## 2. Authentication \& Authorization

### 2.1 Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /auth/v1/token
       â”‚ { email, password }
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase Auth   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Returns JWT + refresh_token
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚ Store tokens
â”‚  (localStorage)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ All API calls include:
       â”‚ Authorization: Bearer {access_token}
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway    â”‚ Validate JWT
â”‚  (Supabase)     â”‚ Apply RLS policies
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Authentication Endpoints

#### POST `/auth/v1/signup`

**Sign up new user**

**Request:**

```json
{
  "email": "ahmed@example.com",
  "password": "SecurePass123!",
  "data": {
    "full_name": "Ahmed Mohamed",
    "role": "team_member"
  }
}
```

**Response (201 Created):**

```json
{
  "access_token": "eyJhbGci...",
  "refresh_token": "v1.Mr5...",
  "expires_in": 3600,
  "token_type": "bearer",
  "user": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "email": "ahmed@example.com",
    "created_at": "2026-01-24T01:30:00Z"
  }
}
```

---

#### POST `/auth/v1/token?grant_type=password`

**Login (get access token)**

**Request:**

```json
{
  "email": "ahmed@example.com",
  "password": "SecurePass123!"
}
```

**Response (200 OK):**

```json
{
  "access_token": "eyJhbGci...",
  "refresh_token": "v1.Mr5...",
  "expires_in": 3600,
  "token_type": "bearer"
}
```

---

#### POST `/auth/v1/token?grant_type=refresh_token`

**Refresh access token**

**Request:**

```json
{
  "refresh_token": "v1.Mr5..."
}
```

**Response (200 OK):**

```json
{
  "access_token": "eyJhbGci...",
  "refresh_token": "v1.New...",
  "expires_in": 3600
}
```

---

#### POST `/auth/v1/logout`

**Logout (invalidate tokens)**

**Headers:**

```
Authorization: Bearer {access_token}
```

**Response (204 No Content)**

---

### 2.3 Authorization (Row Level Security)

**RLS Policies** enforced automatically on all tables:

```sql
-- Example: Users can only see tasks in their workspace
CREATE POLICY "Users view workspace tasks"
ON tasks FOR SELECT
USING (
  EXISTS (
    SELECT 1 FROM projects p
    JOIN workspaces w ON w.id = p.workspace_id
    JOIN user_roles ur ON ur.workspace_id = w.id
    WHERE p.id = tasks.project_id
      AND ur.user_id = auth.uid()
  )
);
```

**Authorization happens at database level** - no middleware needed.

---

## 3. Core API Endpoints

### 3.1 Tasks API

#### GET `/rest/v1/tasks`

**List all tasks (filtered by RLS)**

**Query Parameters:**

- `status=eq.in_progress` - Filter by status
- `assigned_to=eq.{user_id}` - Filter by assignee
- `project_id=eq.{project_id}` - Filter by project
- `order=deadline.asc` - Sort by deadline
- `select=*,project:projects(name),assigned_user:user_profiles(full_name)` - Join related tables
- `limit=50` - Pagination limit
- `offset=0` - Pagination offset

**Example Request:**

```bash
GET /rest/v1/tasks?status=eq.in_progress&order=deadline.asc&select=*,project:projects(name)
Authorization: Bearer {token}
```

**Response (200 OK):**

```json
[
  {
    "id": "task-123",
    "title": "Design Instagram carousel posts",
    "description": "Create 5 slides for Ramadan campaign",
    "status": "in_progress",
    "priority": "high",
    "assigned_to": "user-456",
    "project_id": "project-789",
    "deadline": "2026-01-28T18:00:00Z",
    "created_at": "2026-01-20T10:00:00Z",
    "updated_at": "2026-01-24T01:30:00Z",
    "project": {
      "name": "Ramadan Campaign 2026"
    }
  }
]
```

---

#### GET `/rest/v1/tasks?id=eq.{task_id}`

**Get single task by ID**

**Response (200 OK):**

```json
{
  "id": "task-123",
  "title": "Design Instagram carousel posts",
  "description": "Create 5 slides...",
  "status": "in_progress",
  "priority": "high",
  "assigned_to": "user-456",
  "project_id": "project-789",
  "deadline": "2026-01-28T18:00:00Z",
  "created_at": "2026-01-20T10:00:00Z",
  "updated_at": "2026-01-24T01:30:00Z",
  "files": [
    {
      "id": "file-001",
      "name": "design_v1.png",
      "url": "https://.../design_v1.png",
      "size": 245678
    }
  ],
  "comments": [
    {
      "id": "comment-001",
      "content": "Looks great!",
      "user_id": "user-789",
      "created_at": "2026-01-23T15:00:00Z"
    }
  ]
}
```

---

#### POST `/rest/v1/tasks`

**Create new task**

**Request:**

```json
{
  "title": "Write ad copy for Facebook campaign",
  "description": "3 variations, max 125 characters each",
  "status": "todo",
  "priority": "medium",
  "assigned_to": "user-456",
  "project_id": "project-789",
  "deadline": "2026-01-30T12:00:00Z"
}
```

**Response (201 Created):**

```json
{
  "id": "task-new-001",
  "title": "Write ad copy for Facebook campaign",
  "status": "todo",
  "created_at": "2026-01-24T01:40:00Z",
  "created_by": "user-current"
}
```

**Automatic Side Effects:**

- Activity log entry created
- Assignee notification sent
- Realtime broadcast to workspace channel

---

#### PATCH `/rest/v1/tasks?id=eq.{task_id}`

**Update task (partial update)**

**Request:**

```json
{
  "status": "done",
  "completed_at": "2026-01-24T01:45:00Z"
}
```

**Response (200 OK):**

```json
{
  "id": "task-123",
  "status": "done",
  "completed_at": "2026-01-24T01:45:00Z",
  "updated_at": "2026-01-24T01:45:00Z"
}
```

---

#### DELETE `/rest/v1/tasks?id=eq.{task_id}`

**Delete task (soft delete preferred)**

**Response (204 No Content)**

**Note:** Recommend soft delete (status = 'archived') instead of hard delete for audit trail.

---

### 3.2 Projects API

#### GET `/rest/v1/projects`

**List projects**

**Query Parameters:**

- `workspace_id=eq.{workspace_id}`
- `status=eq.active`
- `client_id=eq.{client_id}`

**Response (200 OK):**

```json
[
  {
    "id": "project-789",
    "name": "Ramadan Campaign 2026",
    "description": "Social media campaign for Nike Ramadan collection",
    "status": "active",
    "client_id": "client-001",
    "workspace_id": "workspace-001",
    "start_date": "2026-01-15",
    "end_date": "2026-02-28",
    "created_at": "2026-01-10T10:00:00Z",
    "client": {
      "name": "Nike Egypt"
    }
  }
]
```

---

#### POST `/rest/v1/projects`

**Create project**

**Request:**

```json
{
  "name": "Q1 Product Launch",
  "description": "Launch new shoe collection",
  "status": "active",
  "client_id": "client-001",
  "workspace_id": "workspace-001",
  "start_date": "2026-02-01",
  "end_date": "2026-04-30"
}
```

**Response (201 Created)**

---

### 3.3 Clients API

#### GET `/rest/v1/clients`

**List clients**

**Query Parameters:**

- `workspace_id=eq.{workspace_id}`
- `status=eq.active`

**Response (200 OK):**

```json
[
  {
    "id": "client-001",
    "name": "Nike Egypt",
    "contact_name": "Yara Ahmed",
    "contact_email": "yara@nike.com",
    "status": "active",
    "workspace_id": "workspace-001",
    "brand_kit": {
      "logo_primary": "https://.../nike-logo.png",
      "colors": {
        "primary": "#000000",
        "secondary": "#FFFFFF"
      },
      "fonts": {
        "heading": "Futura Bold",
        "body": "Helvetica Neue"
      }
    },
    "created_at": "2025-11-01T10:00:00Z"
  }
]
```

---

#### POST `/rest/v1/clients`

**Create client**

**Request:**

```json
{
  "name": "Adidas Egypt",
  "contact_name": "Mohamed Ali",
  "contact_email": "mohamed@adidas.com",
  "workspace_id": "workspace-001",
  "status": "active"
}
```

**Response (201 Created)**

---

#### PATCH `/rest/v1/clients?id=eq.{client_id}`

**Update client (including brand kit)**

**Request:**

```json
{
  "brand_kit": {
    "logo_primary": "https://.../adidas-logo.png",
    "colors": {
      "primary": "#000000",
      "secondary": "#FFFFFF",
      "accent": "#FF6B35"
    }
  }
}
```

**Response (200 OK)**

---

### 3.4 Comments API

#### GET `/rest/v1/comments?task_id=eq.{task_id}`

**Get comments for task**

**Response (200 OK):**

```json
[
  {
    "id": "comment-001",
    "task_id": "task-123",
    "user_id": "user-456",
    "content": "Looks great! Just make the logo bigger.",
    "created_at": "2026-01-23T15:30:00Z",
    "user_profile": {
      "full_name": "Sara Ahmed",
      "avatar_url": "https://.../sara.jpg"
    }
  }
]
```

---

#### POST `/rest/v1/comments`

**Add comment to task**

**Request:**

```json
{
  "task_id": "task-123",
  "content": "Updated! Please review v2."
}
```

**Response (201 Created):**

```json
{
  "id": "comment-new-001",
  "task_id": "task-123",
  "user_id": "user-current",
  "content": "Updated! Please review v2.",
  "created_at": "2026-01-24T01:50:00Z"
}
```

**Side Effects:**

- Notification sent to task assignee + watchers
- Realtime broadcast to task channel

---

### 3.5 Files API (Supabase Storage)

#### POST `/storage/v1/object/{bucket}/{path}`

**Upload file**

**Request (multipart/form-data):**

```bash
POST /storage/v1/object/files/task-123/design_v1.png
Authorization: Bearer {token}
Content-Type: multipart/form-data

[Binary file data]
```

**Response (200 OK):**

```json
{
  "Key": "files/task-123/design_v1.png",
  "Id": "file-uuid-001"
}
```

---

#### GET `/storage/v1/object/public/{bucket}/{path}`

**Get public file URL**

**Example:**

```
https://[project-ref].supabase.co/storage/v1/object/public/files/task-123/design_v1.png
```

**Note:** Files can be public or private (RLS controlled)

---

#### DELETE `/storage/v1/object/{bucket}/{path}`

**Delete file**

**Response (200 OK)**

---

### 3.6 Analytics API (Materialized Views)

#### GET `/rest/v1/workspace_analytics?workspace_id=eq.{workspace_id}`

**Get workspace analytics**

**Response (200 OK):**

```json
{
  "workspace_id": "workspace-001",
  "period": "last_30_days",
  "tasks_created": 245,
  "tasks_completed": 198,
  "completion_rate": 80.8,
  "avg_completion_time_hours": 24.5,
  "overdue_tasks": 12,
  "total_hours_logged": 845.5,
  "top_performers": [
    {
      "user_id": "user-456",
      "full_name": "Ahmed Mohamed",
      "tasks_completed": 47,
      "avg_time_hours": 18.2
    }
  ]
}
```

---

### 3.7 Time Tracking API

#### POST `/rest/v1/time_logs`

**Start/stop time tracking**

**Start Timer Request:**

```json
{
  "task_id": "task-123",
  "start_time": "2026-01-24T02:00:00Z"
}
```

**Response (201 Created):**

```json
{
  "id": "timelog-001",
  "task_id": "task-123",
  "user_id": "user-current",
  "start_time": "2026-01-24T02:00:00Z",
  "end_time": null,
  "duration_seconds": null
}
```

---

**Stop Timer Request (PATCH):**

```json
{
  "end_time": "2026-01-24T04:30:00Z",
  "duration_seconds": 9000
}
```

**Response (200 OK)**

---

### 3.8 Notifications API

#### GET `/rest/v1/notifications?user_id=eq.{user_id}&read=eq.false`

**Get unread notifications**

**Response (200 OK):**

```json
[
  {
    "id": "notif-001",
    "user_id": "user-456",
    "type": "task_assigned",
    "title": "New task assigned",
    "message": "You have been assigned: Write ad copy for Facebook campaign",
    "link": "/tasks/task-new-001",
    "read": false,
    "created_at": "2026-01-24T01:40:00Z"
  }
]
```

---

#### PATCH `/rest/v1/notifications?id=eq.{notif_id}`

**Mark notification as read**

**Request:**

```json
{
  "read": true
}
```

**Response (200 OK)**

---

## 4. Edge Functions (Serverless APIs)

### 4.1 AI Assistant (Ø³ÙÙ†ÙØ¯)

#### POST `/functions/v1/ai-ask`

**Ask Ø³ÙÙ†ÙØ¯ AI a question**

**Request:**

```json
{
  "question": "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ£Ø®Ø±Ø© ÙÙŠ workspace E-commerceØŸ",
  "context_type": "workspace",
  "context_id": "workspace-001"
}
```

**Response (200 OK):**

```json
{
  "answer": "Ø¹Ù†Ø¯Ùƒ 3 Ù…Ù‡Ø§Ù… Ù…ØªØ£Ø®Ø±Ø© ÙÙŠ workspace E-commerce:\n1. Design Instagram carousel (deadline: 22 ÙŠÙ†Ø§ÙŠØ±) - Assigned to Ø£Ø­Ù…Ø¯\n2. Write ad copy (deadline: 23 ÙŠÙ†Ø§ÙŠØ±) - Assigned to Ø³Ø§Ø±Ø©\n3. Client review meeting prep (deadline: 24 ÙŠÙ†Ø§ÙŠØ±) - Unassigned\n\nÙ‡Ù„ ØªØ­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©ØŸ",
  "tokens_used": 245,
  "remaining_quota": 47,
  "response_time_ms": 1850
}
```

**Error (429 Too Many Requests):**

```json
{
  "error": "quota_exceeded",
  "message": "You've used all 50 questions this month. Upgrade to Pro for unlimited.",
  "quota_limit": 50,
  "quota_used": 50
}
```

---

### 4.2 Prayer Times Sync

#### POST `/functions/v1/prayer-times-sync`

**Sync daily prayer times (cron job)**

**Request (Internal - triggered by pg_cron):**

```json
{
  "date": "2026-01-24",
  "cities": ["Cairo", "Riyadh", "Dubai", "Jeddah"]
}
```

**Response (200 OK):**

```json
{
  "synced": 4,
  "failed": 0,
  "cached_until": "2026-01-25T00:00:00Z"
}
```

---

### 4.3 Ads Sync (Meta/Google)

#### POST `/functions/v1/ads-sync`

**Sync ad campaign data (cron job - every 6h)**

**Request (Internal):**

```json
{
  "platform": "meta",
  "account_ids": ["act_123", "act_456"]
}
```

**Response (200 OK):**

```json
{
  "campaigns_synced": 12,
  "ad_sets_synced": 45,
  "insights_rows": 180,
  "sync_duration_ms": 8500
}
```

---

### 4.4 Webhooks (External Integrations)

#### POST `/functions/v1/webhooks/stripe`

**Stripe payment webhook**

**Request (from Stripe):**

```json
{
  "type": "invoice.payment_succeeded",
  "data": {
    "object": {
      "customer": "cus_123",
      "amount_paid": 3000,
      "currency": "usd"
    }
  }
}
```

**Response (200 OK):**

```json
{
  "received": true
}
```

**Actions:**

- Update subscription status
- Send receipt email
- Log payment in database

---

## 5. Real-time Subscriptions (WebSocket)

### 5.1 Task Updates

**Subscribe to task changes:**

```javascript
const channel = supabase
  .channel('task-123-changes')
  .on(
    'postgres_changes',
    {
      event: '*',
      schema: 'public',
      table: 'tasks',
      filter: 'id=eq.task-123'
    },
    (payload) => {
      console.log('Task updated:', payload.new);
      // Update UI with new data
    }
  )
  .subscribe();
```

**Payload Example:**

```json
{
  "schema": "public",
  "table": "tasks",
  "commit_timestamp": "2026-01-24T02:00:00Z",
  "eventType": "UPDATE",
  "new": {
    "id": "task-123",
    "status": "done",
    "updated_at": "2026-01-24T02:00:00Z"
  },
  "old": {
    "status": "in_progress"
  }
}
```

---

### 5.2 Comments Real-time

**Subscribe to new comments on task:**

```javascript
const channel = supabase
  .channel('task-123-comments')
  .on(
    'postgres_changes',
    {
      event: 'INSERT',
      schema: 'public',
      table: 'comments',
      filter: 'task_id=eq.task-123'
    },
    (payload) => {
      console.log('New comment:', payload.new);
      // Append comment to UI
    }
  )
  .subscribe();
```

---

### 5.3 Presence Tracking

**Track who's viewing a task:**

```javascript
const channel = supabase.channel('task-123-presence')
  .on('presence', { event: 'sync' }, () => {
    const state = channel.presenceState();
    console.log('Online users:', Object.keys(state));
  })
  .subscribe(async (status) => {
    if (status === 'SUBSCRIBED') {
      await channel.track({
        user_id: 'user-456',
        full_name: 'Ahmed Mohamed',
        viewing_since: new Date().toISOString()
      });
    }
  });
```

---

## 6. Error Handling

### 6.1 Standard Error Response

```json
{
  "error": "error_code",
  "message": "Human-readable error message",
  "details": {
    "field": "Additional context"
  },
  "hint": "Suggested action to fix error"
}
```

### 6.2 HTTP Status Codes


| Code    | Meaning               | Example                             |
| :------ | :-------------------- | :---------------------------------- |
| **200** | OK                    | Successful GET/PATCH/DELETE         |
| **201** | Created               | Successful POST                     |
| **204** | No Content            | Successful DELETE (no body)         |
| **400** | Bad Request           | Invalid input data                  |
| **401** | Unauthorized          | Missing/invalid JWT token           |
| **403** | Forbidden             | RLS policy denied access            |
| **404** | Not Found             | Resource doesn't exist              |
| **409** | Conflict              | Duplicate entry (unique constraint) |
| **429** | Too Many Requests     | Rate limit exceeded                 |
| **500** | Internal Server Error | Server-side error                   |

### 6.3 Common Error Examples

**401 Unauthorized:**

```json
{
  "error": "invalid_token",
  "message": "JWT token is expired or invalid",
  "hint": "Please login again to get a new token"
}
```

**403 Forbidden (RLS):**

```json
{
  "error": "insufficient_permissions",
  "message": "You don't have permission to access this resource",
  "hint": "Contact your workspace owner to adjust your role"
}
```

**429 Rate Limit:**

```json
{
  "error": "rate_limit_exceeded",
  "message": "You have exceeded your rate limit of 1000 requests per hour",
  "retry_after": 1800
}
```

---

## 7. Rate Limiting

### 7.1 Rate Limits by Plan


| Plan           | Requests/Hour | Burst Limit | AI Queries/Month               |
| :------------- | :------------ | :---------- | :----------------------------- |
| **Free**       | 100           | 20/min      | 50                             |
| **Starter**    | 500           | 50/min      | 50                             |
| **Pro**        | 1,000         | 100/min     | Unlimited (with AI Pro add-on) |
| **Enterprise** | 10,000+       | Custom      | Unlimited                      |

### 7.2 Rate Limit Headers

**Every API response includes:**

```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 847
X-RateLimit-Reset: 1737681600
```

---

## 8. Webhooks (Phase 5 - Outgoing)

### 8.1 Webhook Events

**Available Events:**

- `task.created`
- `task.updated`
- `task.deleted`
- `task.status_changed`
- `comment.created`
- `file.uploaded`
- `project.completed`
- `client.added`

### 8.2 Webhook Payload Example

**Event:** `task.status_changed`

**POST to customer webhook URL:**

```json
{
  "event": "task.status_changed",
  "timestamp": "2026-01-24T02:00:00Z",
  "data": {
    "task_id": "task-123",
    "old_status": "in_progress",
    "new_status": "done",
    "changed_by": "user-456",
    "workspace_id": "workspace-001"
  }
}
```

**Signature Header (for verification):**

```
X-Webhook-Signature: sha256=abc123...
```

---

## 9. External API Integrations

### 9.1 Meta Graph API (Ads Monitoring)

**Endpoint:** `https://graph.facebook.com/v18.0/act_{ad_account_id}/campaigns`

**Request (from our backend):**

```bash
GET /v18.0/act_123/campaigns?fields=id,name,status,objective,daily_budget,insights{impressions,clicks,spend,conversions}
Authorization: Bearer {user_access_token}
```

**Our API exposes this as:**

```bash
GET /rest/v1/meta_campaigns?ad_account_id=eq.act_123
```

---

### 9.2 OpenAI API (AI Assistant)

**Endpoint:** `https://api.openai.com/v1/chat/completions`

**Request (from Edge Function):**

```json
{
  "model": "gpt-4o-mini",
  "messages": [
    {
      "role": "system",
      "content": "You are Ø³ÙÙ†ÙØ¯, an AI assistant for Ninja Gen Z..."
    },
    {
      "role": "user",
      "content": "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©ØŸ"
    }
  ],
  "temperature": 0.3,
  "max_tokens": 500
}
```

---

### 9.3 AlAdhan API (Prayer Times)

**Endpoint:** `https://api.aladhan.com/v1/timingsByCity/{date}`

**Request (from n8n workflow):**

```bash
GET /v1/timingsByCity/24-01-2026?city=Cairo&country=Egypt&method=5
```

**Response:**

```json
{
  "data": {
    "timings": {
      "Fajr": "05:15",
      "Dhuhr": "12:10",
      "Asr": "15:05",
      "Maghrib": "17:30",
      "Isha": "18:50"
    }
  }
}
```

**We cache this in `prayer_times_cache` table daily.**

---

## 10. API Versioning Strategy

### 10.1 Current Approach

- **Supabase REST API:** No versioning (backward compatible by default)
- **Edge Functions:** `/v1/` prefix in path

### 10.2 Future (Phase 5 - Public API)

- **Explicit versioning:** `/api/v1/`, `/api/v2/`
- **Deprecation policy:** 6 months notice before breaking changes
- **Documentation:** OpenAPI 3.0 spec published at `/api/docs`

---

## 11. API Security Checklist

âœ… **Authentication:** JWT tokens (short-lived, 1h default)
âœ… **Authorization:** RLS policies on all tables
âœ… **Encryption:** TLS 1.3 for all connections
âœ… **Rate Limiting:** Per-plan limits enforced
âœ… **Input Validation:** Zod schemas on frontend + database constraints
âœ… **SQL Injection:** Protected by Supabase (parameterized queries)
âœ… **XSS Protection:** Content-Security-Policy headers
âœ… **CORS:** Configured per allowed origin
âœ… **Audit Logging:** All actions logged in `activity_logs`
âœ… **Secrets Management:** Environment variables (never in code)

---

**Ø¬Ø§Ù‡Ø²ØŸ** ğŸ¯

Ø§Ù„ØªØ§Ù„ÙŠ:

1. **DevOps \& CI/CD Pipeline** (deployment, monitoring, rollback)
2. **Testing Strategy** (unit, integration, e2e)

Ø£ÙŠ ÙˆØ§Ø­Ø¯ Ù†Ø¨Ø¯Ø£ Ø¨ÙŠÙ‡ØŸ
<span style="display:none">[^10][^12][^14][^16][^2][^4][^6][^8][^9]</span>

<div align="center">â‚</div>

[^1]: Pricing page.md
    
[^2]: Pricing Model.md
    
[^3]: PHASE 5 (ØªÙƒÙ…Ù„Ø©).md
    
[^4]: PHASE 5 â€” SCALE \& ENTERPRISE (Month 11-14).md
    
[^5]: PHASE 4.2 Mockup Preview System.md
    
[^6]: PHASE 4.1 â€” ADVANCED \& INTEGRATIONS.md
    
[^7]: PHASE 3.3 (Complete) â€” PRODUCTIVITY \& CULTURE.md
    
[^8]: Phase 3.2 UX Features.md
    
[^9]: PHASE 3 â€” Productivity \& Culture (Month 6â€“7).md
    
[^10]: 3. Basic Analytics Dashboard.md
    
[^11]: 2. CLIENT \& TEAM ENHANCEMENT.md
    
[^12]: 1 (UPDATED) - FOUNDATION.md
    
[^13]: Technical Details, Features \& Implem.md
    
[^14]: Product Vision Document1.2.md
    
[^15]: Product Vision Document1.1.md
    
[^16]: PART 3_ SYSTEM DESIGN (ØªÙƒÙ…Ù„Ø©).md
    
[^17]: PART 3_ COMPLETE SYSTEM DESIGN.md
